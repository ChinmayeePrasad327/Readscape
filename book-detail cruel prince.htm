<!-- Filename suggestion: the-cruel-prince.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Cruel Prince - READSCAPE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.4/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="books.css" />
  <style>
    body { padding-top: 80px; }
    .book-detail-container { display: flex; flex-wrap: wrap; gap: 40px; margin-top: 30px; }
    .book-cover { flex: 1 1 300px; text-align: center; }
    .book-cover img { max-width: 100%; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
    .book-info { flex: 2 1 500px; }
    .book-info h2 { font-weight: bold; }
    .review-section, .extra-details { margin-top: 40px; }
    .badge { font-size: 0.9rem; }
    .review-form {
      background-color: #fdf4e3;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
      margin-top: 30px;
    }
  </style>
</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-brown px-3" style="position: fixed; top: 0; left: 0; width: 100%; z-index: 9999;">
  <a class="navbar-brand text-white fw-bold" href="#">ReadEscape</a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="mainNavbar">
    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
      <li class="nav-item"><a class="nav-link text-white" href="Booknew.htm">Home</a></li>
      <li class="nav-item"><a class="nav-link text-white" href="#">About Us</a></li>
      <li class="nav-item"><a class="nav-link text-white" href="#">Books</a></li>
      <li class="nav-item"><a class="nav-link text-white" href="#">Ebooks</a></li>
      <li class="nav-item"><a class="nav-link text-white" href="AudioBook.htm">Audio Books</a></li>
      <li class="nav-item"><a class="nav-link text-white" href="Text.htm">Text Books</a></li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown">Others</a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#">üí¨Reviews</a></li>
          <li><a class="dropdown-item" href="#">üéÅOffers</a></li>
        </ul>
      </li>
    </ul>

    <form class="d-flex flex-grow-1 ms-3" role="search">
      <input class="form-control me-2 w-100" type="search" placeholder="Search books" aria-label="Search">
      <button class="btn btn-outline-warning" type="submit">Search</button>
    </form>
    <ul class="navbar-nav ms-3 d-flex align-items-center gap-3">
      <li class="nav-item"><a class="nav-link icon-brown" href="#"><i class="fas fa-heart"></i></a></li>
      <li class="nav-item"><a class="nav-link icon-brown" href="#"><i class="fas fa-shopping-cart"></i></a></li>
      <li class="nav-item">
        <a href="profile.htm"><img id="navProfilePic" src="https://via.placeholder.com/40" alt="Profile" class="nav-profile-img" onerror="this.src='profile-image.webp';" /></a>
      </li>
    </ul>
  </div>
</nav>

<!-- Main Book Info -->
<div class="container book-detail-container">
  <div class="book-cover">
    <img src="cruel prince.jpeg" alt="The Cruel Prince Book Cover" />
  </div>
  <div class="book-info">
    <h2>The Cruel Prince</h2>
    <p><strong>Author:</strong> Holly Black</p>
    <p><strong>Pages:</strong> 384</p>
    <p><strong>Price:</strong> ‚Çπ499</p>
    <p><strong>Summary:</strong> Jude was seven when her parents were murdered and she and her sisters were stolen away to live in the treacherous High Court of Faerie. Now, ten years later, Jude wants nothing more than to belong. But many of the fey despise humans. Especially Prince Cardan, the youngest and most wicked son of the High King.</p>
    <div class="mb-3">
      <label for="quantity" class="form-label"><strong>Quantity:</strong></label>
      <input type="number" id="quantity" class="form-control w-25" min="1" value="1" />
    </div>
    <button class="btn btn-warning mt-2">Add to Cart üõí</button>
  </div>
</div>

<!-- Review Section -->
<div class="container review-section">
  <h4>‚≠ê Reviews</h4>
  <div id="reviewList"></div>
</div>

<!-- Review Submission -->
<div class="container review-form">
  <h5>Add Your Review</h5>
  <form onsubmit="submitReview(event)">
    <div class="mb-2">
      <label for="reviewerName" class="form-label">Your Name</label>
      <input type="text" id="reviewerName" class="form-control" required />
    </div>
    <div class="mb-2">
      <label for="reviewText" class="form-label">Your Review</label>
      <textarea id="reviewText" class="form-control" rows="3" required></textarea>
    </div>
    <div class="mb-3">
      <label for="reviewRating" class="form-label">Rating</label>
      <select id="reviewRating" class="form-select w-25" required>
        <option value="5">5 ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</option>
        <option value="4">4 ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</option>
        <option value="3">3 ‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</option>
        <option value="2">2 ‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ</option>
        <option value="1">1 ‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ</option>
      </select>
    </div>
    <button type="submit" class="btn btn-success">Submit Review</button>
  </form>
</div>

<!-- Extra Book Info -->
<div class="container extra-details">
  <h4>üìò Book Details</h4>
  <ul>
    <li><strong>Publisher:</strong> Little, Brown Books for Young Readers</li>
    <li><strong>Language:</strong> English</li>
    <li><strong>Genre:</strong> Fantasy, Young Adult, Romance</li>
    <li><strong>ISBN:</strong> 978-0316310277</li>
  </ul>
</div>

<!-- Scripts -->
<script>
  function loadReviews() {
    const reviews = JSON.parse(localStorage.getItem("cruelprince_reviews")) || [];
    const reviewList = document.getElementById("reviewList");
    reviewList.innerHTML = "";

    reviews.forEach((review, index) => {
      reviewList.innerHTML += `
        <div class="border p-3 rounded mb-2">
          <strong>${review.name}</strong> <span class="badge bg-warning text-dark">${review.rating}‚òÖ</span>
          <p>${review.text}</p>
          ${review.fromUser ? `<button class="btn btn-sm btn-outline-danger" onclick="deleteReview(${index})">üóë Delete</button>` : ""}
        </div>
      `;
    });
  }

  function submitReview(e) {
    e.preventDefault();
    const name = document.getElementById("reviewerName").value;
    const text = document.getElementById("reviewText").value;
    const rating = document.getElementById("reviewRating").value;

    const newReview = { name, text, rating, fromUser: true };
    const reviews = JSON.parse(localStorage.getItem("cruelprince_reviews")) || [];
    reviews.push(newReview);
    localStorage.setItem("cruelprince_reviews", JSON.stringify(reviews));

    e.target.reset();
    loadReviews();
  }

  function deleteReview(index) {
    const reviews = JSON.parse(localStorage.getItem("cruelprince_reviews")) || [];
    if (reviews[index]?.fromUser) {
      reviews.splice(index, 1);
      localStorage.setItem("cruelprince_reviews", JSON.stringify(reviews));
      loadReviews();
    }
  }

  window.onload = function () {
    const existing = JSON.parse(localStorage.getItem("cruelprince_reviews"));
    if (!existing || existing.length === 0) {
      const defaultReviews = [
        { name: "Aria", text: "Twisty and thrilling! I couldn't stop reading.", rating: "5" },
        { name: "Dev", text: "An intriguing world with complicated characters. Loved it!", rating: "4" }
      ];
      localStorage.setItem("cruelprince_reviews", JSON.stringify(defaultReviews));
    }

    loadReviews();

    const user = JSON.parse(localStorage.getItem("readscape_user"));
    const navPic = document.getElementById("navProfilePic");
    if (user?.profilePic && navPic) {
      navPic.src = user.profilePic;
    }
  };
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.4/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
